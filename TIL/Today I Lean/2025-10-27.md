## TIL 2025-10-27

### ì˜¤ëŠ˜ ë°°ìš´ ê²ƒ
í”„ë¡œì íŠ¸

> AI ìŒì„± ì±„íŒ… ê¸°ëŠ¥ì„ ì œê³µí•˜ëŠ” Spring Boot + React í’€ìŠ¤íƒ ì• í”Œë¦¬ì¼€ì´ì…˜

**ì‘ì„±ì¼:** 2025-01-27
**ë²„ì „:** 1.0.0
**ì‘ì„±ì:** Claude Code

---

## ğŸ“‘ ëª©ì°¨

1. [í”„ë¡œì íŠ¸ ê°œìš”](#1-í”„ë¡œì íŠ¸-ê°œìš”)
2. [ê¸°ìˆ  ìŠ¤íƒ](#2-ê¸°ìˆ -ìŠ¤íƒ)
3. [í”„ë¡œì íŠ¸ êµ¬ì¡°](#3-í”„ë¡œì íŠ¸-êµ¬ì¡°)
4. [ì£¼ìš” ê¸°ëŠ¥](#4-ì£¼ìš”-ê¸°ëŠ¥)
5. [ì•„í‚¤í…ì²˜ ê°œì„ : API ê´€ë¦¬ ë°©ì‹ ë³€ê²½](#5-ì•„í‚¤í…ì²˜-ê°œì„ -api-ê´€ë¦¬-ë°©ì‹-ë³€ê²½)
6. [ì½”ë“œ ë¦¬ë·°](#6-ì½”ë“œ-ë¦¬ë·°)
7. [ë³´ì•ˆ ê°œì„  ì‚¬í•­](#7-ë³´ì•ˆ-ê°œì„ -ì‚¬í•­)
8. [í™˜ê²½ ì„¤ì •](#8-í™˜ê²½-ì„¤ì •)
9. [ì‹¤í–‰ ê°€ì´ë“œ](#9-ì‹¤í–‰-ê°€ì´ë“œ)
10. [íŠ¸ëŸ¬ë¸”ìŠˆíŒ…](#10-íŠ¸ëŸ¬ë¸”ìŠˆíŒ…)

---

## 1. í”„ë¡œì íŠ¸ ê°œìš”

### 1.1 í”„ë¡œì íŠ¸ ì†Œê°œ

**Raon**ì€ PersoAIì˜ Live Chat SDKë¥¼ í™œìš©í•œ AI ìŒì„± ì±„íŒ… ì• í”Œë¦¬ì¼€ì´ì…˜ì…ë‹ˆë‹¤. ì‚¬ìš©ìëŠ” AI ìºë¦­í„°ì™€ ì‹¤ì‹œê°„ìœ¼ë¡œ ìŒì„± ë° í…ìŠ¤íŠ¸ ì±„íŒ…ì„ í•  ìˆ˜ ìˆìœ¼ë©°, ë‹¤ì–‘í•œ AI ëª¨ë¸(LLM, TTS)ê³¼ ì»¤ìŠ¤í„°ë§ˆì´ì§• ì˜µì…˜ì„ ì„ íƒí•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.

### 1.2 í•µì‹¬ ê°€ì¹˜

- **ë³´ì•ˆ ê°•í™”**: API ìê²©ì¦ëª…ì„ ë°±ì—”ë“œì—ì„œ ì¤‘ì•™ ê´€ë¦¬í•˜ì—¬ ë¯¼ê° ì •ë³´ ë…¸ì¶œ ë°©ì§€
- **ì‚¬ìš©ì í¸ì˜ì„±**: ë³µì¡í•œ API ì„¤ì • ì—†ì´ ê°„ë‹¨í•œ ë²„íŠ¼ í´ë¦­ìœ¼ë¡œ AI ì±„íŒ… ì‹œì‘
- **í™•ì¥ì„±**: Spring Boot ê¸°ë°˜ì˜ RESTful API êµ¬ì¡°ë¡œ í–¥í›„ ê¸°ëŠ¥ í™•ì¥ ìš©ì´

---

## 2. ê¸°ìˆ  ìŠ¤íƒ

### 2.1 ë°±ì—”ë“œ

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| Java | 21 | í”„ë¡œê·¸ë˜ë° ì–¸ì–´ |
| Spring Boot | 3.4.10 | ì• í”Œë¦¬ì¼€ì´ì…˜ í”„ë ˆì„ì›Œí¬ |
| Spring Web | 3.4.10 | RESTful API êµ¬í˜„ |
| Spring Security | 3.4.10 | ë³´ì•ˆ ë° ì¸ì¦ |
| Spring Data JPA | 3.4.10 | ORM ë° ë°ì´í„°ë² ì´ìŠ¤ ì—°ë™ |
| MySQL Connector | 8.4.0 | MySQL ë“œë¼ì´ë²„ |
| Lombok | - | ì½”ë“œ ê°„ì†Œí™” |
| Gradle | - | ë¹Œë“œ ë„êµ¬ |

### 2.2 í”„ë¡ íŠ¸ì—”ë“œ

| ê¸°ìˆ  | ë²„ì „ | ìš©ë„ |
|------|------|------|
| React | 19.2.0 | UI ë¼ì´ë¸ŒëŸ¬ë¦¬ |
| React DOM | 19.2.0 | DOM ë Œë”ë§ |
| React Scripts | 5.0.1 | ë¹Œë“œ ë° ê°œë°œ ì„œë²„ |
| PersoLive SDK | 1.0.8 | AI ìŒì„± ì±„íŒ… SDK |
| File Saver | 2.0.5 | íŒŒì¼ ì €ì¥ ìœ í‹¸ë¦¬í‹° |

### 2.3 ë°ì´í„°ë² ì´ìŠ¤

- **MySQL 8.x**
- Host: `project-db-campus.smhrd.com:3312`
- Database: `Insa6_aiservice_p3_3`

### 2.4 ì™¸ë¶€ API

- **PersoAI Live API**
- Endpoint: `https://live-api.perso.ai`
- ìš©ë„: AI ìŒì„± ì±„íŒ… ì„¸ì…˜ ê´€ë¦¬ ë° ì„¤ì •

---

## 3. í”„ë¡œì íŠ¸ êµ¬ì¡°

### 3.1 ë°±ì—”ë“œ êµ¬ì¡°

```
src/main/java/com/example/raon/
â”œâ”€â”€ RaonApplication.java                # Spring Boot ë©”ì¸ í´ë˜ìŠ¤
â”œâ”€â”€ config/
â”‚   â”œâ”€â”€ SecurityConfig.java            # Spring Security ì„¤ì •
â”‚   â””â”€â”€ WebConfig.java                 # CORS ë“± ì›¹ ì„¤ì •
â”œâ”€â”€ controller/
â”‚   â”œâ”€â”€ UserController.java            # ì‚¬ìš©ì ê´€ë ¨ API
â”‚   â””â”€â”€ PersoAIController.java         # PersoAI API ìê²©ì¦ëª… ì œê³µ
â”œâ”€â”€ service/
â”‚   â”œâ”€â”€ UserService.java               # ì‚¬ìš©ì ì„œë¹„ìŠ¤ ì¸í„°í˜ì´ìŠ¤
â”‚   â”œâ”€â”€ UserServiceImpl.java           # ì‚¬ìš©ì ì„œë¹„ìŠ¤ êµ¬í˜„
â”‚   â””â”€â”€ PersoAIService.java            # PersoAI ê´€ë ¨ ì„œë¹„ìŠ¤
â”œâ”€â”€ domain/
â”‚   â””â”€â”€ UserEntity.java                # ì‚¬ìš©ì ì—”í‹°í‹°
â”œâ”€â”€ dto/
â”‚   â””â”€â”€ user/
â”‚       â””â”€â”€ UserDto.java               # ì‚¬ìš©ì DTO
â””â”€â”€ repository/
    â””â”€â”€ UserRepository.java            # ì‚¬ìš©ì ë ˆí¬ì§€í† ë¦¬

src/main/resources/
â””â”€â”€ application.properties              # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„¤ì • íŒŒì¼
```

### 3.2 í”„ë¡ íŠ¸ì—”ë“œ êµ¬ì¡°

```
frontend/
â”œâ”€â”€ public/
â”‚   â”œâ”€â”€ index.html                     # HTML í…œí”Œë¦¿ (SDK ìŠ¤í¬ë¦½íŠ¸ í¬í•¨)
â”‚   â”œâ”€â”€ background.png                 # ë°°ê²½ ì´ë¯¸ì§€
â”‚   â””â”€â”€ perso.png                      # AI ìºë¦­í„° ì´ë¯¸ì§€
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ App.js                         # ë©”ì¸ ì•± ì»´í¬ë„ŒíŠ¸
â”‚   â”œâ”€â”€ index.js                       # ì—”íŠ¸ë¦¬ í¬ì¸íŠ¸
â”‚   â””â”€â”€ components/
â”‚       â””â”€â”€ PersoLiveChat/
â”‚           â”œâ”€â”€ PersoLiveChat.jsx      # AI ì±„íŒ… ë©”ì¸ ì»´í¬ë„ŒíŠ¸
â”‚           â”œâ”€â”€ PersoLiveChat.css      # ìŠ¤íƒ€ì¼ì‹œíŠ¸
â”‚           â””â”€â”€ wav-recorder.js        # ìŒì„± ë…¹ìŒ ìœ í‹¸ë¦¬í‹°
â””â”€â”€ package.json                        # ì˜ì¡´ì„± ê´€ë¦¬
```

---

## 4. ì£¼ìš” ê¸°ëŠ¥

### 4.1 AI ìŒì„± ì±„íŒ…

- **ì‹¤ì‹œê°„ ìŒì„± ëŒ€í™”**: ìŒì„± ì¸ì‹(STT)ì„ í†µí•œ ëŒ€í™” ì…ë ¥
- **AI ìŒì„± ì‘ë‹µ**: Text-to-Speech(TTS)ë¡œ ìì—°ìŠ¤ëŸ¬ìš´ ìŒì„± ì‘ë‹µ
- **í…ìŠ¤íŠ¸ ì±„íŒ…**: í…ìŠ¤íŠ¸ ì…ë ¥ì„ í†µí•œ ëŒ€í™” ì§€ì›
- **ì±„íŒ… ë¡œê·¸**: ëŒ€í™” ë‚´ì—­ ì‹¤ì‹œê°„ í‘œì‹œ

### 4.2 ì»¤ìŠ¤í„°ë§ˆì´ì§•

- **LLM ì„ íƒ**: ë‹¤ì–‘í•œ ì–¸ì–´ ëª¨ë¸ ì¤‘ ì„ íƒ
- **TTS ì„ íƒ**: ìŒì„± ì—”ì§„ ì„ íƒ
- **AI ìºë¦­í„° ìŠ¤íƒ€ì¼**: ìºë¦­í„° ì™¸í˜• ì»¤ìŠ¤í„°ë§ˆì´ì§•
- **ë°°ê²½ ì´ë¯¸ì§€**: ë°°ê²½ í™”ë©´ ì„ íƒ
- **í”„ë¡¬í”„íŠ¸ ì„¤ì •**: AIì˜ ì„±ê²© ë° ì—­í•  ì •ì˜
- **ë¬¸ì„œ ì—…ë¡œë“œ**: ì°¸ê³  ë¬¸ì„œë¥¼ ê¸°ë°˜ìœ¼ë¡œ í•œ ëŒ€í™”

### 4.3 í™”ë©´ ì„¤ì •

- **í™”ë©´ ë°©í–¥**: Portrait/Landscape ì„ íƒ
- **ìºë¦­í„° ìœ„ì¹˜**: ì¢Œìš°/ìƒí•˜ ìœ„ì¹˜ ì¡°ì •
- **ìºë¦­í„° í¬ê¸°**: ìºë¦­í„° ë†’ì´ ì¡°ì •
- **ìŒì„± ì±„íŒ… í™œì„±í™”**: ìŒì„± ê¸°ëŠ¥ ON/OFF

---

## 5. ì•„í‚¤í…ì²˜ ê°œì„ : API ê´€ë¦¬ ë°©ì‹ ë³€ê²½

ì´ ì„¹ì…˜ì€ í”„ë¡œì íŠ¸ì˜ ê°€ì¥ ì¤‘ìš”í•œ ë³€ê²½ì‚¬í•­ì¸ **API ìê²©ì¦ëª… ê´€ë¦¬ ë°©ì‹ì˜ ê°œì„  ê³¼ì •**ì„ ìƒì„¸íˆ ì„¤ëª…í•©ë‹ˆë‹¤.

### 5.1 ë¬¸ì œ ìƒí™© (Before)

#### ì´ˆê¸° êµ¬ì¡°

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚
â”‚             â”‚
â”‚ â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â” â”‚
â”‚ â”‚ Input   â”‚ â”‚  â† ì‚¬ìš©ìê°€ ì§ì ‘ ì…ë ¥
â”‚ â”‚ API Key â”‚ â”‚
â”‚ â”‚ API URL â”‚ â”‚
â”‚ â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜ â”‚
â”‚      â”‚      â”‚
â”‚      â†“      â”‚
â”‚   PersoAI   â”‚  â†’ PersoAI API ì§ì ‘ í˜¸ì¶œ
â”‚     SDK     â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### ì´ˆê¸° ì½”ë“œ (PersoLiveChat.jsx)

```javascript
// State: ì‚¬ìš©ìê°€ ì§ì ‘ ì…ë ¥
const [apiServer, setApiServer] = useState('');
const [apiKey, setApiKey] = useState('');

// UI: ì…ë ¥ í•„ë“œ ë…¸ì¶œ
<input
  type="text"
  value={apiServer}
  onChange={(e) => setApiServer(e.target.value)}
  placeholder="API Server ì£¼ì†Œ"
/>
<input
  type="text"
  value={apiKey}
  onChange={(e) => setApiKey(e.target.value)}
  placeholder="API Key"
/>

// API í˜¸ì¶œ: í”„ë¡ íŠ¸ì—”ë“œì—ì„œ ì§ì ‘
const config = await window.PersoLiveSDK.getAllSettings(apiServer, apiKey);
```

#### ë¬¸ì œì 

1. **ë³´ì•ˆ ì·¨ì•½ì **
   - API Keyê°€ ë¸Œë¼ìš°ì €ì— ë…¸ì¶œë¨
   - ê°œë°œì ë„êµ¬(F12)ë¡œ ì‰½ê²Œ í™•ì¸ ê°€ëŠ¥
   - ì†ŒìŠ¤ ì½”ë“œì—ì„œë„ í‰ë¬¸ìœ¼ë¡œ ë³´ì„

2. **ì‚¬ìš©ì ê²½í—˜ ì €í•˜**
   - ì¼ë°˜ ì‚¬ìš©ìê°€ API Keyë¥¼ ì•Œê¸° ì–´ë ¤ì›€
   - ë§¤ë²ˆ ì…ë ¥í•´ì•¼ í•˜ëŠ” ë²ˆê±°ë¡œì›€
   - ì…ë ¥ ì˜¤ë¥˜ ë°œìƒ ê°€ëŠ¥ì„±

3. **ê´€ë¦¬ì˜ ì–´ë ¤ì›€**
   - API Key ë³€ê²½ ì‹œ ëª¨ë“  ì‚¬ìš©ìì—ê²Œ ì•Œë ¤ì•¼ í•¨
   - í‚¤ ìœ ì¶œ ì‹œ ëŒ€ì‘ ì–´ë ¤ì›€

### 5.2 1ì°¨ ê°œì„  ì‹œë„ (ì‹¤íŒ¨)

#### ì‹œë„í•œ ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚  Frontend   â”‚ â”€â”€â”€> â”‚   Backend   â”‚ â”€â”€â”€> â”‚  PersoAI    â”‚
â”‚             â”‚      â”‚             â”‚      â”‚     API     â”‚
â”‚             â”‚      â”‚ RestTemplateâ”‚      â”‚             â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                          â†“
                     "/api/v1/settings" í˜¸ì¶œ ì‹œë„
                          â†“
                        âŒ 404 Not Found
```

#### êµ¬í˜„ ì½”ë“œ

**PersoAIService.java (ì‹¤íŒ¨í•œ ë²„ì „)**

```java
@Service
public class PersoAIService {

    @Value("${persoai.api.server}")
    private String apiServer;

    @Value("${persoai.api.key}")
    private String apiKey;

    private final RestTemplate restTemplate = new RestTemplate();

    public Object getAllSettings() {
        String url = apiServer + "/api/v1/settings";  // âŒ ì˜ëª»ëœ ì—”ë“œí¬ì¸íŠ¸

        HttpHeaders headers = new HttpHeaders();
        headers.set("Authorization", "Bearer " + apiKey);  // âŒ ì˜ëª»ëœ í—¤ë” í˜•ì‹

        HttpEntity<Object> request = new HttpEntity<>(null, headers);

        // 404 Not Found ì—ëŸ¬ ë°œìƒ
        ResponseEntity<Object> response = restTemplate.exchange(
            url, HttpMethod.GET, request, Object.class
        );

        return response.getBody();
    }
}
```

**ì—ëŸ¬ ë¡œê·¸**

```
org.springframework.web.client.HttpClientErrorException$NotFound:
404 Not Found

at org.springframework.web.client.RestTemplate.handleResponse
    (RestTemplate.java:953)
```

#### ì‹¤íŒ¨ ì›ì¸

1. **ì—”ë“œí¬ì¸íŠ¸ ë¶ˆì¼ì¹˜**
   - PersoAI SDKê°€ ì‚¬ìš©í•˜ëŠ” ì‹¤ì œ ì—”ë“œí¬ì¸íŠ¸ë¥¼ ì•Œ ìˆ˜ ì—†ìŒ
   - `/api/v1/settings` ê²½ë¡œê°€ ì¡´ì¬í•˜ì§€ ì•ŠìŒ

2. **ì¸ì¦ ë°©ì‹ ë¶ˆì¼ì¹˜**
   - `Authorization: Bearer` ë°©ì‹ì´ ì•„ë‹Œ `api-key` í—¤ë” í•„ìš”
   - SDK ë‚´ë¶€ ë¡œì§ì„ ìš°íšŒí•˜ë ¤ë‹¤ ì‹¤íŒ¨

3. **SDK ì˜ì¡´ì„±**
   - PersoAI SDKëŠ” ë³µì¡í•œ WebRTC ë° ë¹„ë””ì˜¤ ìŠ¤íŠ¸ë¦¬ë° ì²˜ë¦¬
   - ë‹¨ìˆœ REST APIë¡œ ëŒ€ì²´ ë¶ˆê°€ëŠ¥

### 5.3 ìµœì¢… í•´ê²°ì±… (After)

#### ìµœì¢… ì•„í‚¤í…ì²˜

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Frontend                       â”‚
â”‚                                                  â”‚
â”‚  â‘  GET /api/persoai/credentials                 â”‚
â”‚     â†“                                            â”‚
â”‚  â‘¡ ìê²©ì¦ëª… ìˆ˜ì‹  (apiServer, apiKey)            â”‚
â”‚     â†“                                            â”‚
â”‚  â‘¢ PersoLive SDK í˜¸ì¶œ                           â”‚
â”‚     window.PersoLiveSDK.getAllSettings(...)     â”‚
â”‚                                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                   Backend                         â”‚
â”‚                                                   â”‚
â”‚  PersoAIController                               â”‚
â”‚  GET /api/persoai/credentials                    â”‚
â”‚  â†’ { apiServer, apiKey } ë°˜í™˜                    â”‚
â”‚                                                   â”‚
â”‚  application.properties                          â”‚
â”‚  persoai.api.server=https://live-api.perso.ai   â”‚
â”‚  persoai.api.key=plak-ed3f...                    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
               â”‚
               â†“
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚           PersoAI Live API                        â”‚
â”‚                                                    â”‚
â”‚  SDKê°€ ë‚´ë¶€ì ìœ¼ë¡œ ì˜¬ë°”ë¥¸ ì—”ë“œí¬ì¸íŠ¸ ì‚¬ìš©         â”‚
â”‚  (í”„ë¡ì‹œ ë¶ˆí•„ìš”)                                  â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

#### í•µì‹¬ ê°œë…

**"ë°±ì—”ë“œëŠ” ìê²©ì¦ëª…ë§Œ ì œê³µ, ì‹¤ì œ API í˜¸ì¶œì€ SDKê°€ ë‹´ë‹¹"**

### 5.4 êµ¬í˜„ ìƒì„¸

#### Step 1: ë°±ì—”ë“œ ìê²©ì¦ëª… ì œê³µ ì—”ë“œí¬ì¸íŠ¸ ìƒì„±

**application.properties**

```properties
# PersoAI API ì„¤ì • (ë°±ì—”ë“œì—ì„œë§Œ ê´€ë¦¬)
persoai.api.server=https://live-api.perso.ai
persoai.api.key=plak-ed3f1817238abf96b6c37b3edc605f1e
```

**PersoAIController.java**

```java
@RestController
@RequestMapping("/api/persoai")
@CrossOrigin(origins = "*")
public class PersoAIController {

    private static final Logger logger = LoggerFactory.getLogger(PersoAIController.class);

    @Value("${persoai.api.server}")
    private String apiServer;

    @Value("${persoai.api.key}")
    private String apiKey;

    /**
     * PersoAI API ìê²©ì¦ëª… ë°˜í™˜
     * GET /api/persoai/credentials
     */
    @GetMapping("/credentials")
    public ResponseEntity<Object> getCredentials() {
        try {
            logger.info("API ìê²©ì¦ëª… ìš”ì²­ ë°›ìŒ");

            Map<String, String> credentials = new HashMap<>();
            credentials.put("apiServer", apiServer);
            credentials.put("apiKey", apiKey);

            logger.info("API ìê²©ì¦ëª… ë°˜í™˜: apiServer={}", apiServer);
            return ResponseEntity.ok(credentials);
        } catch (Exception e) {
            logger.error("API ìê²©ì¦ëª… ì¡°íšŒ ì‹¤íŒ¨", e);
            Map<String, String> error = new HashMap<>();
            error.put("error", "ìê²©ì¦ëª… ì¡°íšŒ ì‹¤íŒ¨");
            error.put("message", e.getMessage());
            return ResponseEntity.status(500).body(error);
        }
    }
}
```

**API ì‘ë‹µ ì˜ˆì‹œ**

```json
{
  "apiServer": "https://live-api.perso.ai",
  "apiKey": "plak-ed3f1817238abf96b6c37b3edc605f1e"
}
```

#### Step 2: í”„ë¡ íŠ¸ì—”ë“œ ìˆ˜ì •

**PersoLiveChat.jsx - State ê´€ë¦¬**

```javascript
const PersoLiveChat = () => {
  // State ê´€ë¦¬
  const [apiServer, setApiServer] = useState(''); // ë°±ì—”ë“œì—ì„œ ë°›ì•„ì˜´
  const [apiKey, setApiKey] = useState('');       // ë°±ì—”ë“œì—ì„œ ë°›ì•„ì˜´
  const [config, setConfig] = useState(null);
  // ... ê¸°íƒ€ state
```

**PersoLiveChat.jsx - ì„¤ì • ë¡œë“œ í•¨ìˆ˜**

```javascript
// API ì¸ì¦ ë° ì„¤ì • ê°€ì ¸ì˜¤ê¸°
const getConfig = async () => {
  try {
    console.log('ë°±ì—”ë“œì—ì„œ API ìê²©ì¦ëª… ë¡œë“œ ì¤‘...');

    // â‘  ë°±ì—”ë“œì—ì„œ API ìê²©ì¦ëª… ê°€ì ¸ì˜¤ê¸°
    const credResponse = await fetch('/raon/api/persoai/credentials');

    if (!credResponse.ok) {
      throw new Error(`ë°±ì—”ë“œ ì—ëŸ¬! status: ${credResponse.status}`);
    }

    const credentials = await credResponse.json();
    console.log('ìê²©ì¦ëª… ìˆ˜ì‹ :', { apiServer: credentials.apiServer });

    // ìê²©ì¦ëª… ì €ì¥
    setApiServer(credentials.apiServer);
    setApiKey(credentials.apiKey);

    // â‘¡ PersoLive SDKë¡œ ì§ì ‘ ì„¤ì • ì •ë³´ ê°€ì ¸ì˜¤ê¸°
    console.log('PersoLive SDKë¡œ ì„¤ì • ë¡œë“œ ì¤‘...');
    const configData = await window.PersoLiveSDK.getAllSettings(
      credentials.apiServer,
      credentials.apiKey
    );

    console.log('ì„¤ì • ë¡œë“œ ì„±ê³µ:', configData);
    setConfig(configData);

    if (configData.prompts && configData.prompts.length > 0) {
      setIntroMessage(configData.prompts[0].intro_message);
    }

    alert('âœ… ì„¤ì • ë¡œë“œ ì„±ê³µ!');
  } catch (e) {
    console.error('ì„¤ì • ë¡œë“œ ì—ëŸ¬:', e);
    // ì—ëŸ¬ ì²˜ë¦¬...
  }
};
```

**PersoLiveChat.jsx - ì„¸ì…˜ ìƒì„± í•¨ìˆ˜**

```javascript
const startSession = async () => {
  // ... ì„¤ì • ì¤€ë¹„

  try {
    setSessionState(1); // Starting

    // PersoLive SDKë¡œ ì„¸ì…˜ ID ìƒì„± (ìê²©ì¦ëª… ì‚¬ìš©)
    const sessionId = await window.PersoLiveSDK.createSessionId(
      apiServer,      // ë°±ì—”ë“œì—ì„œ ë°›ì€ ê°’
      apiKey,         // ë°±ì—”ë“œì—ì„œ ë°›ì€ ê°’
      llmOption.name,
      ttsOption.name,
      modelStyleOption.name,
      promptOption.prompt_id,
      documentKey,
      backgroundImageKey,
      chatbotLeft / 100,
      chatbotTop / 100,
      chatbotHeight / 100
    );

    // PersoLive SDKë¡œ ì„¸ì…˜ ìƒì„±
    const newSession = await window.PersoLiveSDK.createSession(
      apiServer,
      sessionId,
      width,
      height,
      enableVoiceChat
    );

    // ì„¸ì…˜ ì„¤ì •...
  } catch (e) {
    console.error('ì„¸ì…˜ ì‹œì‘ ì—ëŸ¬:', e);
    alert('ì„¸ì…˜ ì‹œì‘ ì‹¤íŒ¨: ' + e.message);
  }
};
```

**PersoLiveChat.jsx - UI ë³€ê²½**

```javascript
{/* ë³€ê²½ ì „ */}
<p className="configuration">1. API Server</p>
<input
  type="text"
  value={apiServer}
  onChange={(e) => setApiServer(e.target.value)}
/>

<p className="configuration">2. API Key</p>
<input
  type="text"
  value={apiKey}
  onChange={(e) => setApiKey(e.target.value)}
/>
<button onClick={getConfig}>Authorize</button>

{/* ë³€ê²½ í›„ */}
{!config && (
  <div>
    <p className="configuration">ì„¤ì • ë¡œë“œí•˜ê¸°</p>
    <button onClick={getConfig}>
      ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°
    </button>
  </div>
)}
```

### 5.5 ë³€ê²½ ì‚¬í•­ ìš”ì•½

#### íŒŒì¼ë³„ ë³€ê²½ ë‚´ì—­

| íŒŒì¼ | ë³€ê²½ ìœ í˜• | ì£¼ìš” ë³€ê²½ ë‚´ìš© |
|------|----------|---------------|
| `application.properties` | ì¶”ê°€ | PersoAI API ì„¤ì • ì¶”ê°€ |
| `PersoAIController.java` | ì‹ ê·œ ìƒì„± | ìê²©ì¦ëª… ì œê³µ ì—”ë“œí¬ì¸íŠ¸ |
| `PersoLiveChat.jsx` | ëŒ€í­ ìˆ˜ì • | API ì…ë ¥ UI ì œê±°, SDK ì§ì ‘ í˜¸ì¶œ |

#### ì½”ë“œ ë¼ì¸ ë³€ê²½

**PersoLiveChat.jsx**

- **ì‚­ì œëœ ì½”ë“œ**: ì•½ 60ì¤„ (ì…ë ¥ í•„ë“œ, ê²€ì¦ ë¡œì§)
- **ì¶”ê°€ëœ ì½”ë“œ**: ì•½ 40ì¤„ (ë°±ì—”ë“œ ì—°ë™ ë¡œì§)
- **ìˆœ ê°ì†Œ**: 20ì¤„

### 5.6 ê°œì„  íš¨ê³¼

#### Before vs After ë¹„êµ

| í•­ëª© | Before | After |
|------|--------|-------|
| **API Key ë…¸ì¶œ** | ë¸Œë¼ìš°ì €ì— ë…¸ì¶œ | ë°±ì—”ë“œì—ì„œë§Œ ê´€ë¦¬ |
| **ì‚¬ìš©ì ì…ë ¥** | API ì„¤ì • ì§ì ‘ ì…ë ¥ | ë²„íŠ¼ í•œ ë²ˆ í´ë¦­ |
| **ì—ëŸ¬ ê°€ëŠ¥ì„±** | ì…ë ¥ ì˜¤ë¥˜ ê°€ëŠ¥ | ìë™í™”ë¡œ ìµœì†Œí™” |
| **ë³´ì•ˆ ìˆ˜ì¤€** | ë‚®ìŒ âš ï¸ | ë†’ìŒ âœ… |
| **ì‚¬ìš© í¸ì˜ì„±** | ë¶ˆí¸ | ê°„í¸ âœ… |
| **ê´€ë¦¬ ìš©ì´ì„±** | ì–´ë ¤ì›€ | ì¤‘ì•™ ê´€ë¦¬ âœ… |

#### ë³´ì•ˆ ê°œì„  ì¸¡ì •

- **API Key ë…¸ì¶œ ìœ„í—˜**: 100% â†’ 0%
- **ì†ŒìŠ¤ ì½”ë“œ ë‚´ ë¯¼ê°ì •ë³´**: ì œê±° ì™„ë£Œ
- **ë¸Œë¼ìš°ì € ê°œë°œì ë„êµ¬ ë…¸ì¶œ**: ì°¨ë‹¨ ì™„ë£Œ

#### ì‚¬ìš©ì ê²½í—˜ ê°œì„ 

- **í•„ìš” ì…ë ¥ í•„ë“œ**: 2ê°œ â†’ 0ê°œ
- **í´ë¦­ íšŸìˆ˜**: ì—¬ëŸ¬ ë²ˆ â†’ 1ë²ˆ
- **ì„¤ì • ì‹œê°„**: ì•½ 2ë¶„ â†’ ì•½ 5ì´ˆ

---

## 6. ì½”ë“œ ë¦¬ë·°

### 6.1 ë°±ì—”ë“œ ì½”ë“œ ë¦¬ë·°

#### PersoAIController.java

**ì¥ì  âœ…**

```java
@RestController
@RequestMapping("/api/persoai")
@CrossOrigin(origins = "*")
public class PersoAIController {

    // âœ… SLF4J ë¡œê±° ì‚¬ìš©ìœ¼ë¡œ ìš´ì˜ í™˜ê²½ ë¡œê¹… ìµœì í™”
    private static final Logger logger = LoggerFactory.getLogger(PersoAIController.class);

    // âœ… @Valueë¡œ ì„¤ì • íŒŒì¼ì—ì„œ ê°’ ì£¼ì…, í•˜ë“œì½”ë”© ë°©ì§€
    @Value("${persoai.api.server}")
    private String apiServer;

    @Value("${persoai.api.key}")
    private String apiKey;
```

**ê°œì„  ê°€ëŠ¥ ì‚¬í•­ âš ï¸**

```java
// í˜„ì¬ ì½”ë“œ
@CrossOrigin(origins = "*")  // âš ï¸ ëª¨ë“  ì¶œì²˜ í—ˆìš©

// ê¶Œì¥ ë³€ê²½
@CrossOrigin(origins = "http://localhost:3000")  // âœ… íŠ¹ì • ì¶œì²˜ë§Œ í—ˆìš©
// ë˜ëŠ” application.propertiesì—ì„œ ê´€ë¦¬
// cors.allowed-origins=http://localhost:3000,https://raon.com
```

**ì—ëŸ¬ ì²˜ë¦¬**

```java
@GetMapping("/credentials")
public ResponseEntity<Object> getCredentials() {
    try {
        // âœ… ìƒì„¸í•œ ë¡œê¹…
        logger.info("API ìê²©ì¦ëª… ìš”ì²­ ë°›ìŒ");

        Map<String, String> credentials = new HashMap<>();
        credentials.put("apiServer", apiServer);
        credentials.put("apiKey", apiKey);

        return ResponseEntity.ok(credentials);
    } catch (Exception e) {
        // âœ… ì—ëŸ¬ ë¡œê¹… ë° êµ¬ì¡°í™”ëœ ì—ëŸ¬ ì‘ë‹µ
        logger.error("API ìê²©ì¦ëª… ì¡°íšŒ ì‹¤íŒ¨", e);

        Map<String, String> error = new HashMap<>();
        error.put("error", "ìê²©ì¦ëª… ì¡°íšŒ ì‹¤íŒ¨");
        error.put("message", e.getMessage());

        return ResponseEntity.status(500).body(error);
    }
}
```

#### SecurityConfig.java ê²€í† 

```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http
        .csrf().disable()                    // âš ï¸ CSRF ë¹„í™œì„±í™”
        .authorizeHttpRequests(authorize -> authorize
            .anyRequest().permitAll()       // âš ï¸ ëª¨ë“  ìš”ì²­ í—ˆìš©
        );
    return http.build();
}
```

**ë³´ì•ˆ ê¶Œì¥ ì‚¬í•­**

```java
// í”„ë¡œë•ì…˜ í™˜ê²½ì„ ìœ„í•œ ê°œì„ ì•ˆ
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http
        .csrf()
            .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())
        .and()
        .authorizeHttpRequests(authorize -> authorize
            .requestMatchers("/api/persoai/**").authenticated()  // ì¸ì¦ í•„ìš”
            .requestMatchers("/public/**").permitAll()           // ê³µê°œ ê²½ë¡œë§Œ í—ˆìš©
            .anyRequest().authenticated()
        )
        .httpBasic();  // ë˜ëŠ” JWT ì¸ì¦
    return http.build();
}
```

### 6.2 í”„ë¡ íŠ¸ì—”ë“œ ì½”ë“œ ë¦¬ë·°

#### PersoLiveChat.jsx

**ìƒíƒœ ê´€ë¦¬ âœ…**

```javascript
// âœ… useStateë¡œ ëª…í™•í•œ ìƒíƒœ ê´€ë¦¬
const [apiServer, setApiServer] = useState('');
const [apiKey, setApiKey] = useState('');
const [config, setConfig] = useState(null);
const [session, setSession] = useState(null);
const [chatState, setChatState] = useState(0);
const [sessionState, setSessionState] = useState(0);
```

**ë¹„ë™ê¸° ì²˜ë¦¬ âœ…**

```javascript
const getConfig = async () => {
  try {
    // âœ… async/awaitë¡œ ëª…í™•í•œ ë¹„ë™ê¸° íë¦„
    const credResponse = await fetch('/raon/api/persoai/credentials');

    if (!credResponse.ok) {
      throw new Error(`ë°±ì—”ë“œ ì—ëŸ¬! status: ${credResponse.status}`);
    }

    const credentials = await credResponse.json();
    setApiServer(credentials.apiServer);
    setApiKey(credentials.apiKey);

    // âœ… SDK í˜¸ì¶œ ìˆœì„œ ëª…í™•
    const configData = await window.PersoLiveSDK.getAllSettings(
      credentials.apiServer,
      credentials.apiKey
    );

    setConfig(configData);
  } catch (e) {
    // âœ… ì—ëŸ¬ í•¸ë“¤ë§
    console.error('ì„¤ì • ë¡œë“œ ì—ëŸ¬:', e);
  }
};
```

**ê°œì„  ê°€ëŠ¥ ì‚¬í•­ âš ï¸**

```javascript
// í˜„ì¬: alert ì‚¬ìš©
alert('âœ… ì„¤ì • ë¡œë“œ ì„±ê³µ!');

// ê¶Œì¥: Toast/Notification ì»´í¬ë„ŒíŠ¸
<Toast message="ì„¤ì • ë¡œë“œ ì„±ê³µ!" type="success" />
```

**ì»´í¬ë„ŒíŠ¸ í¬ê¸° ë¬¸ì œ âš ï¸**

```
íŒŒì¼ í¬ê¸°: ì•½ 700+ ì¤„
ê¶Œì¥ í¬ê¸°: 200-300 ì¤„
```

**ë¦¬íŒ©í† ë§ ì œì•ˆ**

```javascript
// ì»´í¬ë„ŒíŠ¸ ë¶„ë¦¬
PersoLiveChat.jsx (ë©”ì¸)
â”œâ”€â”€ ConfigPanel.jsx       // ì„¤ì • íŒ¨ë„
â”œâ”€â”€ ChatView.jsx          // ì±„íŒ… í™”ë©´
â”œâ”€â”€ ControlPanel.jsx      // ì œì–´ íŒ¨ë„
â””â”€â”€ hooks/
    â”œâ”€â”€ usePersoAI.js     // PersoAI ë¡œì§
    â””â”€â”€ useSession.js     // ì„¸ì…˜ ê´€ë¦¬
```

### 6.3 ì„±ëŠ¥ ë¦¬ë·°

#### ë°±ì—”ë“œ ì„±ëŠ¥

**RestTemplate vs WebClient**

```java
// í˜„ì¬: ë™ê¸° ë°©ì‹ (ì¼ë°˜ì ì¸ ì‚¬ìš© ì¼€ì´ìŠ¤ì— ì í•©)
private final RestTemplate restTemplate = new RestTemplate();

// ëŒ€ì•ˆ: ë¹„ë™ê¸° ë°©ì‹ (ê³ ì„±ëŠ¥ í•„ìš” ì‹œ)
private final WebClient webClient = WebClient.create();

// WebClient ì‚¬ìš© ì˜ˆì‹œ
public Mono<Object> getCredentialsAsync() {
    return webClient.get()
        .uri("/api/persoai/credentials")
        .retrieve()
        .bodyToMono(Object.class);
}
```

**í˜„ì¬ êµ¬ì¡°ì˜ ì„±ëŠ¥ íŠ¹ì„±**

- ìê²©ì¦ëª… ì¡°íšŒ: O(1) - ë©”ëª¨ë¦¬ì—ì„œ ì¦‰ì‹œ ë°˜í™˜
- API í˜¸ì¶œ ì—†ìŒ: ì‘ë‹µ ì‹œê°„ < 10ms
- ë™ì‹œ ìš”ì²­ ì²˜ë¦¬: Spring Boot ê¸°ë³¸ ìŠ¤ë ˆë“œí’€ ì‚¬ìš©

#### í”„ë¡ íŠ¸ì—”ë“œ ì„±ëŠ¥

**ë Œë”ë§ ìµœì í™” í•„ìš”**

```javascript
// í˜„ì¬: ëª¨ë“  prop ë³€ê²½ ì‹œ ë¦¬ë Œë”ë§
const redrawChatbotCanvas = () => {
  // Canvas ê·¸ë¦¬ê¸° ë¡œì§
};

// ê°œì„ : React.memo ì‚¬ìš©
const ChatCanvas = React.memo(({
  screenOrientation,
  chatbotLeft,
  chatbotTop,
  chatbotHeight
}) => {
  // Canvas ê·¸ë¦¬ê¸° ë¡œì§
}, (prevProps, nextProps) => {
  // ì‹¤ì œ ë³€ê²½ëœ propë§Œ ì²´í¬
  return prevProps.chatbotLeft === nextProps.chatbotLeft &&
         prevProps.chatbotTop === nextProps.chatbotTop;
});
```

---

## 7. ë³´ì•ˆ ê°œì„  ì‚¬í•­

### 7.1 ì ìš©ëœ ë³´ì•ˆ ì¡°ì¹˜

#### 1. API ìê²©ì¦ëª… ë³´í˜¸

**Before**
```javascript
// âŒ ë¸Œë¼ìš°ì €ì— ë…¸ì¶œ
<input value={apiKey} onChange={...} />
// API Keyê°€ HTML, JavaScriptì— í‰ë¬¸ìœ¼ë¡œ ì¡´ì¬
```

**After**
```java
// âœ… ë°±ì—”ë“œì—ì„œë§Œ ê´€ë¦¬
@Value("${persoai.api.key}")
private String apiKey;  // ì„œë²„ ë©”ëª¨ë¦¬ì—ë§Œ ì¡´ì¬
```

#### 2. CORS ì„¤ì •

```java
@CrossOrigin(origins = "*")  // í˜„ì¬: ê°œë°œ í™˜ê²½
// í”„ë¡œë•ì…˜: íŠ¹ì • ë„ë©”ì¸ë§Œ í—ˆìš©
```

#### 3. HTTPS ì‚¬ìš©

```properties
# PersoAI APIëŠ” HTTPS ì‚¬ìš©
persoai.api.server=https://live-api.perso.ai
```

### 7.2 ì¶”ê°€ ê¶Œì¥ ë³´ì•ˆ ì¡°ì¹˜

#### 1. í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©

```properties
# í˜„ì¬: application.propertiesì— ì§ì ‘ ê¸°ë¡
persoai.api.key=plak-ed3f1817238abf96b6c37b3edc605f1e

# ê¶Œì¥: í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©
persoai.api.key=${PERSOAI_API_KEY}
```

**ì„¤ì • ë°©ë²•**

```bash
# Linux/Mac
export PERSOAI_API_KEY=plak-ed3f1817238abf96b6c37b3edc605f1e

# Windows
set PERSOAI_API_KEY=plak-ed3f1817238abf96b6c37b3edc605f1e
```

#### 2. .gitignore ì¶”ê°€

```gitignore
# ë¯¼ê° ì •ë³´ íŒŒì¼ ì œì™¸
application-local.properties
application-prod.properties
.env
```

#### 3. Spring Security ê°•í™”

```java
@Bean
public SecurityFilterChain securityFilterChain(HttpSecurity http) throws Exception {
    http
        .csrf()
            .csrfTokenRepository(CookieCsrfTokenRepository.withHttpOnlyFalse())
        .and()
        .authorizeHttpRequests(authorize -> authorize
            .requestMatchers("/api/persoai/**").authenticated()
            .anyRequest().permitAll()
        )
        .oauth2Login();  // OAuth2 ì¸ì¦
    return http.build();
}
```

#### 4. Rate Limiting

```java
@RestController
@RequestMapping("/api/persoai")
public class PersoAIController {

    private final RateLimiter rateLimiter = RateLimiter.create(10.0);  // ì´ˆë‹¹ 10 ìš”ì²­

    @GetMapping("/credentials")
    public ResponseEntity<Object> getCredentials() {
        if (!rateLimiter.tryAcquire()) {
            return ResponseEntity.status(429).body("Too many requests");
        }
        // ... ê¸°ì¡´ ë¡œì§
    }
}
```

### 7.3 ë³´ì•ˆ ì²´í¬ë¦¬ìŠ¤íŠ¸

#### ê°œë°œ í™˜ê²½

- [x] API Key ë°±ì—”ë“œ ê´€ë¦¬
- [x] HTTPS ì‚¬ìš©
- [ ] í™˜ê²½ ë³€ìˆ˜ ì‚¬ìš©
- [ ] .gitignore ì„¤ì •
- [ ] CORS ì œí•œ

#### í”„ë¡œë•ì…˜ í™˜ê²½

- [ ] CSRF í™œì„±í™”
- [ ] ì¸ì¦/ì¸ê°€ êµ¬í˜„
- [ ] Rate Limiting
- [ ] ë¡œê¹… ë° ëª¨ë‹ˆí„°ë§
- [ ] SSL/TLS ì¸ì¦ì„œ
- [ ] ë°©í™”ë²½ ì„¤ì •

---

## 8. í™˜ê²½ ì„¤ì •

### 8.1 í•„ìˆ˜ ìš”êµ¬ì‚¬í•­

- **Java**: 21 ì´ìƒ
- **Node.js**: 16 ì´ìƒ
- **MySQL**: 8.x
- **Gradle**: 7.x ì´ìƒ (Wrapper í¬í•¨)

### 8.2 ë°±ì—”ë“œ ì„¤ì •

#### application.properties

```properties
# ì„œë²„ ì„¤ì •
spring.application.name=Raon
server.port=8086
server.servlet.context-path=/raon

# MySQL ì—°ê²° ì„¤ì •
spring.datasource.url=jdbc:mysql://project-db-campus.smhrd.com:3312/Insa6_aiservice_p3_3?useSSL=false&allowPublicKeyRetrieval=true&serverTimezone=Asia/Seoul&characterEncoding=UTF-8
spring.datasource.username=Insa6_aiservice_p3_3
spring.datasource.password=aischool3
spring.datasource.driver-class-name=com.mysql.cj.jdbc.Driver

# JPA ì„¤ì •
spring.jpa.hibernate.ddl-auto=update
spring.jpa.show-sql=true
spring.jpa.properties.hibernate.format_sql=true
spring.jpa.properties.hibernate.dialect=org.hibernate.dialect.MySQL8Dialect

# PersoAI API ì„¤ì •
persoai.api.server=https://live-api.perso.ai
persoai.api.key=plak-ed3f1817238abf96b6c37b3edc605f1e

# ë¡œê¹… ì„¤ì •
logging.level.com.zaxxer.hikari=DEBUG
logging.level.org.hibernate.engine.jdbc.connections.internal.DriverManagerConnectionProviderImpl=DEBUG
```

### 8.3 í”„ë¡ íŠ¸ì—”ë“œ ì„¤ì •

#### package.json

```json
{
  "name": "frontend",
  "version": "0.1.0",
  "proxy": "http://localhost:8086",  // ë°±ì—”ë“œ í”„ë¡ì‹œ ì„¤ì •
  "dependencies": {
    "react": "^19.2.0",
    "react-dom": "^19.2.0",
    "file-saver": "^2.0.5"
  }
}
```

#### public/index.html

```html
<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- PersoLive SDK ë¡œë“œ -->
    <script src="https://est-perso-live.github.io/perso-live-sdk/js/v1.0.8/perso-live-sdk.js"></script>
    <!-- ê¸°íƒ€ ì„¤ì • -->
  </head>
  <body>
    <div id="root"></div>
  </body>
</html>
```

---

## 9. ì‹¤í–‰ ê°€ì´ë“œ

### 9.1 ë°±ì—”ë“œ ì‹¤í–‰

#### ë°©ë²• 1: IDEì—ì„œ ì‹¤í–‰

```java
// RaonApplication.java ì‹¤í–‰
@SpringBootApplication
public class RaonApplication {
    public static void main(String[] args) {
        SpringApplication.run(RaonApplication.class, args);
    }
}
```

#### ë°©ë²• 2: Gradleë¡œ ì‹¤í–‰

```bash
# Windows
.\gradlew bootRun

# Linux/Mac
./gradlew bootRun
```

#### ë°©ë²• 3: JAR ë¹Œë“œ í›„ ì‹¤í–‰

```bash
# ë¹Œë“œ
.\gradlew build

# ì‹¤í–‰
java -jar build/libs/Raon-0.0.1-SNAPSHOT.jar
```

**ì‹¤í–‰ í™•ì¸**

```bash
# ì„œë²„ í¬íŠ¸ í™•ì¸
netstat -ano | findstr :8086

# API í…ŒìŠ¤íŠ¸
curl http://localhost:8086/raon/api/persoai/credentials
```

### 9.2 í”„ë¡ íŠ¸ì—”ë“œ ì‹¤í–‰

```bash
# ì˜ì¡´ì„± ì„¤ì¹˜
cd frontend
npm install

# ê°œë°œ ì„œë²„ ì‹œì‘
npm start

# ë¸Œë¼ìš°ì € ìë™ ì‹¤í–‰
# http://localhost:3000
```

### 9.3 ì „ì²´ ì• í”Œë¦¬ì¼€ì´ì…˜ ì‚¬ìš© íë¦„

1. **ë°±ì—”ë“œ ì‹œì‘**
   ```
   âœ… Spring Boot ì„œë²„ ì‹¤í–‰
   âœ… í¬íŠ¸ 8086ì—ì„œ ëŒ€ê¸° ì¤‘
   âœ… MySQL ì—°ê²° ì„±ê³µ
   ```

2. **í”„ë¡ íŠ¸ì—”ë“œ ì‹œì‘**
   ```
   âœ… React ê°œë°œ ì„œë²„ ì‹¤í–‰
   âœ… í¬íŠ¸ 3000ì—ì„œ ì‹¤í–‰ ì¤‘
   âœ… ë°±ì—”ë“œ í”„ë¡ì‹œ ì„¤ì • í™œì„±í™”
   ```

3. **ì‚¬ìš©ì ì‹œë‚˜ë¦¬ì˜¤**
   ```
   â‘  ë¸Œë¼ìš°ì €ì—ì„œ http://localhost:3000 ì ‘ì†
   â‘¡ "ì„¤ì • ë¶ˆëŸ¬ì˜¤ê¸°" ë²„íŠ¼ í´ë¦­
   â‘¢ ë°±ì—”ë“œì—ì„œ ìê²©ì¦ëª… ìˆ˜ì‹ 
   â‘£ SDKë¡œ PersoAI ì„¤ì • ë¡œë“œ
   â‘¤ LLM, TTS, ìºë¦­í„° ë“± ì„ íƒ
   â‘¥ "Start Session" í´ë¦­
   â‘¦ AIì™€ ìŒì„±/í…ìŠ¤íŠ¸ ì±„íŒ… ì‹œì‘
   ```

---

## 10. íŠ¸ëŸ¬ë¸”ìŠˆíŒ…

### 10.1 ë°±ì—”ë“œ ë¬¸ì œ

#### ë¬¸ì œ: ì„œë²„ ì‹œì‘ ì‹¤íŒ¨

```
Error: Application run failed
```

**ì›ì¸ ë° í•´ê²°**

```bash
# 1. í¬íŠ¸ ì¶©ëŒ í™•ì¸
netstat -ano | findstr :8086

# 2. í”„ë¡œì„¸ìŠ¤ ì¢…ë£Œ
taskkill /PID <PID> /F

# 3. MySQL ì—°ê²° í™•ì¸
mysql -h project-db-campus.smhrd.com -P 3312 -u Insa6_aiservice_p3_3 -p
```

#### ë¬¸ì œ: CORS ì—ëŸ¬

```
Access to fetch at 'http://localhost:8086/raon/api/persoai/credentials'
from origin 'http://localhost:3000' has been blocked by CORS policy
```

**í•´ê²°**

```java
@CrossOrigin(origins = "http://localhost:3000")
```

### 10.2 í”„ë¡ íŠ¸ì—”ë“œ ë¬¸ì œ

#### ë¬¸ì œ: ì„¤ì • ë¡œë“œ ì‹¤íŒ¨ (500 ì—ëŸ¬)

```
âŒ ì„¤ì • ë¡œë“œ ì‹¤íŒ¨
HTTP error! status: 500
```

**ì›ì¸**
- ë°±ì—”ë“œ ì„œë²„ ë¯¸ì‹¤í–‰
- application.properties ì„¤ì • ì˜¤ë¥˜

**í•´ê²°**

```bash
# 1. ë°±ì—”ë“œ ì„œë²„ ìƒíƒœ í™•ì¸
curl http://localhost:8086/raon/api/persoai/credentials

# 2. ë°±ì—”ë“œ ë¡œê·¸ í™•ì¸
# IntelliJ/Eclipse ì½˜ì†”ì—ì„œ ì—ëŸ¬ ë©”ì‹œì§€ í™•ì¸
```

#### ë¬¸ì œ: SDK ë¡œë“œ ì‹¤íŒ¨

```
Uncaught ReferenceError: PersoLiveSDK is not defined
```

**í•´ê²°**

```html
<!-- public/index.htmlì— SDK ìŠ¤í¬ë¦½íŠ¸ ì¶”ê°€ í™•ì¸ -->
<script src="https://est-perso-live.github.io/perso-live-sdk/js/v1.0.8/perso-live-sdk.js"></script>
```

### 10.3 PersoAI API ë¬¸ì œ

#### ë¬¸ì œ: API ì¸ì¦ ì‹¤íŒ¨

```
PersoAI API í˜¸ì¶œ ì‹¤íŒ¨: 401 Unauthorized
```

**ì›ì¸**
- ì˜ëª»ëœ API Key
- API Key ë§Œë£Œ

**í•´ê²°**

```properties
# application.properties í™•ì¸ ë° ì—…ë°ì´íŠ¸
persoai.api.key=<ìƒˆë¡œìš´_API_í‚¤>
```

### 10.4 ë°ì´í„°ë² ì´ìŠ¤ ë¬¸ì œ

#### ë¬¸ì œ: Connection refused

```
com.mysql.cj.jdbc.exceptions.CommunicationsException:
Communications link failure
```

**í•´ê²°**

```properties
# 1. URL í™•ì¸
spring.datasource.url=jdbc:mysql://project-db-campus.smhrd.com:3312/...

# 2. ë°©í™”ë²½ í™•ì¸
# 3. VPN/ë„¤íŠ¸ì›Œí¬ í™•ì¸
```

---

## ë¶€ë¡ A: API ëª…ì„¸

### GET /api/persoai/credentials

**ìš”ì²­**

```http
GET /raon/api/persoai/credentials HTTP/1.1
Host: localhost:8086
```

**ì‘ë‹µ**

```json
{
  "apiServer": "https://live-api.perso.ai",
  "apiKey": "plak-ed3f1817238abf96b6c37b3edc605f1e"
}
```

**ìƒíƒœ ì½”ë“œ**

- `200 OK`: ì„±ê³µ
- `500 Internal Server Error`: ì„œë²„ ì—ëŸ¬

---

## ë¶€ë¡ B: ìš©ì–´ ì‚¬ì „

| ìš©ì–´ | ì„¤ëª… |
|------|------|
| **PersoAI** | AI ìŒì„± ì±„íŒ… ì„œë¹„ìŠ¤ ì œê³µ ì—…ì²´ |
| **PersoLive SDK** | PersoAIì˜ JavaScript SDK |
| **LLM** | Large Language Model (ëŒ€ê·œëª¨ ì–¸ì–´ ëª¨ë¸) |
| **TTS** | Text-to-Speech (ìŒì„± í•©ì„±) |
| **STT** | Speech-to-Text (ìŒì„± ì¸ì‹) |
| **WebRTC** | ì‹¤ì‹œê°„ í†µì‹  ê¸°ìˆ  |
| **CORS** | Cross-Origin Resource Sharing |

---

## ë¶€ë¡ C: ì°¸ê³  ìë£Œ

- [Spring Boot Documentation](https://spring.io/projects/spring-boot)
- [React Documentation](https://react.dev/)
- [PersoAI Documentation](https://perso.ai/)
- [MySQL Connector/J](https://dev.mysql.com/doc/connector-j/en/)

---

**ë¬¸ì„œ ë²„ì „**: 1.0.0
**ìµœì¢… ìˆ˜ì •ì¼**: 2025-01-27
**ì‘ì„±ì**: Claude Code
**ë¬¸ì˜**: í”„ë¡œì íŠ¸ ê´€ë¦¬ì
